# SENTIMENT EXTRACTION #

Following Liu's work, a new sentiment extraction attempt will be performed.

The plan is to extract from wheat labelled articles just those few sentences that actually bear wheat-related sentiment. In order to extract the phrases, just the sentences which contain the word "wheat" will be chosen.

If the aim is to capture wheat related sentiment, sentence by sentence sentiment extraction approach gives sharp results, even using VADER sentiment analysis tool. However some work has still to be spent on dictionary improvement and articles cleaning.

It can be affirmed that a sentiment index can be created by cleaning the articles, selecting only the sentences related to wheat, extracting sentiment from them with a refined dictionary and filtering sentiment scores using the Kalman filter. 

## Sentiment Extraction ##
The script _sent_extr.py_ extracts wheat-related sentences from _wheat_articles_ list resulting from Michael Kao's _keyword_extraction.py_ script. The list of wheat labelled articles can be found at the following URL:

https://drive.google.com/open?id=0Bx88UU1MUqu0cElibTB2SXhZVUU


Once sentences are extracted VADER analysis tool is used to analyze sentiment. The result is a matrix called _sentiment_ stored in the file _df.csv_. In the matrix are stored: sentences, compound sentiment scores and sentence date and time.


## Sentiment Extraction Test ##
The script _sent_extr_test.py_ randomly selects one article from wheat labelled articles and extracts wheat-related sentences.


Once sentences are extracted, Google NLP and VADER analysis tool are used to analyze sentiment. The result is printed on screen and it's stored in the file _df_test.csv_.

This method underlines dictionaries limits, namely dictionaries insensitivity to certain economic-sentiment bearing sentences, as sharper results in case of sentences where the use of adjectives is predominant. They have to be noted noted also many duplicated articles and Google NLP slowness: VADER infrastructure is preferable.

#### Duplicated Article Example ####
_{u'rice_keyword': set([u'grain']), u'processed_article': [u'home', u'commodity', u'company', u'market', u'opinion', u'data', u'calendar', u'thurs', u'28', u'jul', u'2016', u'09', u'38', u'uk', u'20', u'apr', u'2011', u'agrimoney', u'com', u'rebound', u'ukraine', u'wheat', u'export', u'may', u'fall', u'short', u'ukraine', u'may', u'return', u'wheat', u'export', u'2011', u'12', u'quite', u'gusto', u'observer', u'expecting', u'thanks', u'yet', u'poor', u'weather', u'impact', u'financial', u'hardship', u'grower', u'us', u'department', u'agriculture', u'attache', u'kiev', u'pegged', u'ukraine', u'wheat', u'export', u'9', u'0m', u'tonne', u'next', u'season', u'assuming', u'country', u'lift', u'quota', u'limited', u'shipment', u'since', u'last', u'year', u'drought', u'affected', u'harvest', u'while', u'large', u'increase', u'year', u'3', u'5m', u'tonne', u'remains', u'pre', u'drought', u'high', u'11', u'0m', u'tonne', u'ukragroconsult', u'influential', u'consultancy', u'belief', u'ukraine', u'export', u'the', u'attache', u'figure', u'reflects', u'part', u'lower', u'estimate', u'crop', u'making', u'harvest', u'many', u'important', u'farming', u'area', u'received', u'le', u'half', u'normal', u'rainfall', u'thus', u'topsoil', u'moisture', u'may', u'unstable', u'spring', u'said', u'report', u'considering', u'factor', u'expected', u'crop', u'resuming', u'vegetation', u'le', u'favourable', u'condition', u'may', u'affect', u'plant', u'spring', u'development', u'consequently', u'impact', u'final', u'harvest', u'figure', u'not', u'optimistic', u'forecast', u'furthermore', u'crop', u'looked', u'set', u'receive', u'limited', u'help', u'nutrient', u'pesticide', u'farmer', u'whose', u'yield', u'depressed', u'weather', u'last', u'year', u'restricted', u'selling', u'grain', u'international', u'price', u'scrimped', u'input', u'forecasts', u'ukraine', u'grain', u'export', u'consensus', u'2010', u'11', u'figur', u'barley', u'usda', u'attache', u'4', u'1m', u'tonne', u'ukragroconsult', u'5', u'2m', u'tonne', u'2', u'6m', u'tonne', u'corn', u'usda', u'attache', u'6', u'0m', u'tonne', u'ukragroconsult', u'6', u'8m', u'tonne', u'5', u'8m', u'tonne', u'wheat', u'usda', u'attache', u'9', u'0m', u'tonne', u'ukragroconsult', u'11', u'0m', u'tonne', u'3', u'4m', u'tonne', u'consensus', u'derived', u'fromaverage', u'usda', u'attache', u'ukragroconsult', u'estimate', u'slow', u'economic', u'recovery', u'financial', u'crisis', u'2008', u'limited', u'lending', u'resource', u'along', u'lower', u'anticipated', u'profit', u'previous', u'year', u'sale', u'harvested', u'crop', u'well', u'limited', u'use', u'advanced', u'technology', u'would', u'constrain', u'harvest', u'briefing', u'said', u'the', u'attache', u'highlighted', u'estimated', u'yield', u'figure', u'3', u'0', u'tonne', u'per', u'hectare', u'wa', u'optimistic', u'forecast', u'ukragroconsult', u'ha', u'actually', u'forecast', u'yield', u'marginally', u'higher', u'3', u'05', u'tonne', u'per', u'hectare', u'feed', u'demand', u'the', u'prospect', u'return', u'black', u'sea', u'agricultural', u'giant', u'known', u'fighting', u'fiercely', u'price', u'full', u'scale', u'grain', u'export', u'represents', u'growing', u'consideration', u'market', u'rumour', u'last', u'week', u'since', u'downplayed', u'imminent', u'russian', u'resumption', u'prompting', u'weakness', u'chicago', u'price', u'the', u'attache', u'remained', u'relatively', u'downbeat', u'hope', u'ukraine', u'barley', u'corn', u'export', u'thanks', u'part', u'growing', u'demand', u'domestic', u'livestock', u'producer', u'growing', u'domestic', u'poultry', u'production', u'us', u'corn', u'major', u'feed', u'ingredient', u'creates', u'growing', u'demand', u'crop', u'report', u'said', u'in', u'addition', u'hog', u'production', u'beginning', u'develop', u'industrial', u'level', u'import', u'delay', u'meant', u'80', u'seed', u'intended', u'import', u'planting', u'spring', u'2011', u'inside', u'country', u'march', u'cut', u'hope', u'improvement', u'corn', u'yield', u'related', u'articles', u'ukraine', u'crop', u'good', u'shape', u'export', u'hope', u'grow', u'talk', u'mount', u'end', u'soon', u'russia', u'grain', u'export', u'ban', u'combine', u'shortage', u'cold', u'set', u'back', u'ukraine', u'grain', u'investors', u'pump', u'400m', u'ukraine', u'farming', u'group', u'agrimoney', u'com', u'data', u'page', u'ukraine', u'corn', u'agrimoney', u'com', u'data', u'page', u'ukraine', u'barley', u'agrimoney', u'com', u'data', u'page', u'ukraine', u'wheat', u'customize', u'style', u'web', u'site', u'mp_releases_box', u'border', u'solid', u'999999', u'1px', u'background', u'color', u'ffffff', u'mp_releases', u'font', u'family', u'geneva', u'arial', u'helvetica', u'sans', u'serif', u'padding', u'top', u'0px', u'position', u'relative', u'vertical', u'align', u'bottom', u'mp_releases', u'li', u'margin', u'top', u'3px', u'mp_releases', u'color', u'0033cc', u'font', u'size', u'12px', u'text', u'decoration', u'underline', u'mp_releases', u'hover', u'color', u'cc0000', u'font', u'size', u'12px', u'ferthead', u'font', u'size', u'14px', u'color', u'000000', u'fertheadbox', u'padding', u'left', u'10px', u'padding', u'top', u'10px', u'ideas', u'wane', u'argentine', u'wheat', u'revival', u'corn', u'hope', u'grow', u'hedge', u'fund', u'sell', u'ag', u'wheat', u'short', u'trouble', u'analysts', u'warn', u'cotton', u'market', u'correction', u'chinese', u'import', u'slump', u'brexit', u'threat', u'ag', u'price', u'yet', u'dryness', u'take', u'toll', u'brazil', u'robusta', u'crop', u'starbucks', u'slows', u'pace', u'coffee', u'buying', u'even', u'price', u'rise', u'pm', u'market', u'fund', u'pile', u'soybean', u'longs', u'wheat', u'short', u'cbh', u'plan', u'emergency', u'storage', u'face', u'bumper', u'aussie', u'grain', u'harvest', u'corn', u'belt', u'farmland', u'price', u'fall', u'despite', u'crop', u'price', u'firmness', u'10', u'european', u'wheat', u'yield', u'hope', u'lifted', u'france', u'era', u'high', u'ag', u'price', u'quite', u'likely', u'oecd', u'un', u'grain', u'price', u'rebound', u'us', u'data', u'corn', u'wheat', u'stock', u'fall', u'short', u'hedge', u'fund', u'accelerate', u'ag', u'selldown', u'boding', u'well', u'wheat', u'price', u'hedge', u'fund', u'quid', u'favouring', u'softs', u'grain', u'come', u'good', u'la', u'nina', u'boost', u'prospect', u'south', u'american', u'wheat', u'harvest', u'corn', u'soybean', u'future', u'rally', u'searing', u'forecast', u'us', u'midwest', u'corn', u'future', u'tumble', u'wheat', u'hit', u'9', u'year', u'low', u'us', u'lift', u'supply', u'hope', u'un', u'cut', u'corn', u'output', u'forecast', u'wheat', u'prospect', u'improve', u'corn', u'soybean', u'future', u'tumble', u'anew', u'la', u'nina', u'fear', u'subside', u'10', u'hedge', u'fund', u'sell', u'grain', u'raise', u'hope', u'corn', u'wheat', u'rally', u'wheat', u'coffee', u'cotton', u'future', u'manage', u'firm', u'end', u'poor', u'month', u'hedge', u'fund', u'turn', u'record', u'bearish', u'hard', u'wheat', u'raising', u'concern', u'hedge', u'fund', u'cut', u'bullish', u'ag', u'bet', u'amid', u'china', u'meat', u'cancer', u'fear', u'cf', u'back', u'idea', u'rise', u'us', u'corn', u'sowings', u'2016', u'food', u'price', u'rise', u'fastest', u'three', u'year', u'say', u'un', u'socgen', u'upbeat', u'wheat', u'soybean', u'coffee', u'price', u'us', u'farmer', u'one', u'third', u'slower', u'selling', u'corn', u'normal', u'adm', u'us', u'ethanol', u'output', u'soar', u'defying', u'weak', u'margin', u'talk', u'wheat', u'future', u'gain', u'2016', u'first', u'time', u'four', u'year', u'10', u'hedge', u'fund', u'may', u'overreacted', u'record', u'wheat', u'sell', u'cocoa', u'future', u'jump', u'despite', u'sharp', u'drop', u'asia', u'grind', u'wheat', u'soar', u'helping', u'corn', u'higher', u'but', u'coffee', u'cotton', u'drop', u'cocoa', u'future', u'rise', u'better', u'expected', u'european', u'demand', u'cattle', u'future', u'ease', u'feedlot', u'number', u'beat', u'forecast', u'european', u'dairy', u'future', u'could', u'finally', u'catch', u'abn', u'downbeat', u'cocoa', u'coffee', u'price', u'citing', u'demand', u'doubt', u'wheat', u'coffee', u'cotton', u'future', u'manage', u'firm', u'end', u'poor', u'month', u'evening', u'market', u'corn', u'cotton', u'future', u'drop', u'wasde', u'loom', u'wheat', u'price', u'continue', u'collapse', u'2014', u'10', u'pm', u'market', u'wheat', u'future', u'dodge', u'bullet', u'ag', u'drop', u'home', u'about', u'rss', u'commodities', u'companies', u'markets', u'subscribe', u'legal', u'disclaimer', u'privacy', u'policy', u'contact', u'acknowledgements', u'start', u'tab', u'content', u'script', u'ul', u'id', u'maintab', u'separate', u'multiple', u'id', u'comma', u'initializetabcontent', u'wholetab', u'var', u'_bizo_data_partner_id', u'513', u'var', u'_bizo_p', u'http', u'document', u'location', u'protocol', u'http', u'sjs', u'http', u'j', u'document', u'write', u'unescape', u'3cscript', u'src', u'_bizo_p', u'bizographics', u'com', u'convert_data', u'j', u'partner_id', u'_bizo_data_partner_id', u'type', u'text', u'javascript', u'3e', u'3c', u'script', u'3e'], u'trade_keyword': set([u'sell', u'import', u'export', u'market']), u'soybean_keyword': set([u'soybean']), u'government_keyword': set([]), u'maize_keyword': set([u'corn']), u'finance_keyword': set([u'fund', u'seed', u'back']), u'source': u'agrimoney', u'link': u'http://www.agrimoney.com/news/rebound-in-ukraines-wheat-exports-may-fall-short--3066.html', u'article': u'home commodities companies markets opinion data calendar Thurs 28  Jul 2016 09:38 UK, 20  Apr 2011, by Agrimoney.com Rebound in Ukraine\'s wheat exports may fall short Ukraine may not return to wheat exports in 2011-12 with quite the gusto that some observers are expecting thanks to, yet more, poor weather and the impact of financial hardship on growers. US Department of Agriculture attaches in Kiev pegged Ukraine\'s wheat exports at 9.0m tonnes next season, assuming the country lifts the quotas which have limited shipments since last year\'s drought-affected harvest. While a large increase on this year\'s 3.5m tonnes, it remains below pre-drought highs, and the 11.0m tonnes that UkrAgroConsult, the influential consultancy, believes that Ukraine will export. The attaches\' figure reflects in part a lower estimate for the crop making it to harvest, after many important farming areas received less than half normal rainfall. "Thus, topsoil moisture may be very unstable this spring," they said in a report. "Considering this factor it is expected that some crops will be resuming vegetation in less-than-favourable conditions, and this may affect plant spring development and consequently have an impact on the final harvest figures." \'Not the most optimistic forecast\' Furthermore, crops looked set to receive only limited help from nutrients and pesticides, as farmers whose yields were depressed by weather last year, and have been restricted in selling their grain at international prices, scrimped on inputs. Forecasts for Ukraine grain exports and (consensus 2010-11 figur Barley: USDA attache, 4.1m tonnes; UkrAgroConsult, 5.2m tonnes; (2.6m tonnes) Corn: USDA attache, 6.0m tonnes; UkrAgroConsult, 6.8m tonnes; (5.8m tonnes) Wheat: USDA attache, 9.0m tonnes; UkrAgroConsult, 11.0m tonnes; (3.4m tonnes) Consensus derived fromaverage of USDA attache and UkrAgroConsult estimates "Slow economic recovery from the financial crisis of 2008, very limited lending resources along with lower-than-anticipated profits from the previous year\'s sales of harvested crop, as well as limited use of advanced technologies," would constrain the harvest, the briefing said. The attaches highlighted that their estimated yield figure of 3.0 tonnes per hectare was "not the most optimistic forecast". UkrAgroConsult has actually forecast the yield only marginally higher, at 3.05 tonnes per hectare. Feed demand The prospects for the return of Black Sea agricultural giants, known for fighting fiercely on price, to full-scale grain exports represents a growing consideration in the market, with rumours last week  and since downplayed - of an imminent Russian resumption prompting weakness in Chicago prices. The attaches remained relatively downbeat on hopes for Ukraine\'s barley and corn exports too, thanks in part to growing demand from domestic livestock producers. "Growing domestic poultry production which uses corn as a major feed ingredient creates growing demand for this crop," their report said. "In addition, hog production is beginning to develop on the industrial level." Import delays, which meant that "about 80% of all seeds intended for import and for planting in spring 2011 were not inside the country as of March", had cut hopes for an improvement in corn yields. RELATED ARTICLES Ukraine crops in good shape, as export hopes grow Talk mounts of end soon to Russia grain export ban Combine shortage and cold set back Ukraine grains Investors pump \\$400m into Ukraine farming groups Agrimoney.com data pages on Ukraine corn Agrimoney.com data pages on Ukraine barley Agrimoney.com data pages on Ukraine wheat \r/* customize styles to your web-site */\r.mp_releases_box {\r border: solid #999999 1px;\r background-color: #FFFFFF;\r}\r#mp_releases {\r font-family:Geneva, Arial, Helvetica, sans-serif;\r padding-top: 0px;\r position: relative;\r vertical-align: bottom;\r}\r#mp_releases li {\r margin-top: 3px;\r}\r#mp_releases a {\r color: #0033CC;\r font-size: 12px;\r text-decoration: underline;\r}\r#mp_releases a:hover {\r color: #CC0000;\r font-size: 12px;\r}\r.ferthead {\r font-size: 14px;\r color: #000000;\r}\r.fertheadbox {\r padding-left: 10px;\r padding-top: 10px;\r}\r Ideas wane on Argentine wheat revival - but corn hopes grow Hedge funds sell ags again - but wheat shorts \'in trouble\' Analysts warn of cotton market \'correction\' as Chinese imports slump Brexit threat to ag prices not over yet Dryness takes further toll on Brazil\'s robusta crop Starbucks slows pace of coffee buying, even as prices rise PM markets: funds pile out of soybean longs, wheat shorts CBH plans \'emergency\' storage in face of bumper Aussie grains harvest Corn Belt farmland prices fall again, despite crop price firmness \r                     \r                     10.  European wheat yield hopes lifted, but not in France \'Era of high ag prices quite likely over\' - OECD, UN Grain prices rebound, after US data on corn, wheat stocks fall short Hedge funds accelerate ag selldown - boding well for wheat prices? Hedge funds quids in, as favouring softs over grains comes good La Nina \'to boost\' prospects for South American wheat harvest Corn, soybean futures rally on \'searing\' forecast for US Midwest Corn futures tumble, wheat hits 9-year low, as US lifts supply hopes UN cuts corn output forecast - as wheat prospects improve Corn, soybean futures tumble anew as La Nina fears subside \r                     \r                     10.  Hedge funds\' sell-off in grains raises hopes for corn, wheat rallies Wheat, coffee, cotton futures manage firm end to poor month Hedge funds turn record bearish on hard wheat - raising concerns Hedge funds cut bullish ag bets, amid China, meat cancer fears CF backs ideas of rise in US corn sowings in 2016 Food prices rise at fastest in three years, says UN SocGen upbeat on wheat, soybean, coffee prices US farmers one-third slower selling corn than normal - ADM US ethanol output soars, defying \'very weak margin\' talk Wheat futures - will they gain in 2016 for the first time in four years? \r                     \r                     10.  Hedge funds \'may have overreacted\' in record wheat sell-down Cocoa futures jump despite sharp drop in Asia\'s grind Wheat soars, helping corn higher. But coffee, cotton drop Cocoa futures rise on better-than-expected European demand Cattle futures ease, as feedlot numbers beat forecasts European dairy futures could finally catch on ABN downbeat on cocoa, coffee prices, citing demand doubts Wheat, coffee, cotton futures manage firm end to poor month Evening markets: corn, cotton futures drop as Wasde looms Wheat prices - will they continue their collapse in 2014? \r                     \r                     10.  PM markets: wheat futures dodge bullet, but other ags drop Home About RSS Commodities Companies Markets Subscribe Legal disclaimer Privacy policy Contact Acknowledgements \r//Start Tab Content script for UL with id="maintab" Separate multiple ids each with a comma.\rinitializetabcontent("wholetab");\r \r  var _bizo_data_partner_id = "513";\r \r  var _bizo_p = (("https:" == document.location.protocol) ? "https://sjs." : "http://js.");\r  document.write(unescape("%3Cscript src=\'" + _bizo_p + "bizographics.com/convert_data.js?partner_id=" + _bizo_data_partner_id + "\' type=\'text/javascript\'%3E%3C/script%3E"));\r', u'date': u'2011-04-20 00:00:00', u'title': u'Rebound in Ukrainian wheat exports may fall short', u'wheat_keyword': set([u'grain']), u'produce_keyword': set([u'cut', u'return', u'customize', u'spring', u'yield', u'food', u'output', u'stock'])}_
